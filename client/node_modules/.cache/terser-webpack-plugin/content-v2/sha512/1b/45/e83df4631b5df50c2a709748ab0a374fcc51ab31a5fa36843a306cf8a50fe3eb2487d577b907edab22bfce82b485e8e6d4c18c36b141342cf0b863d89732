{"map":"{\"version\":3,\"sources\":[\"/Users/clairepeng/Documents/Developer/azamon-server/client/src/components/Login.js\",\"/Users/clairepeng/Documents/Developer/azamon-server/client/src/components/Register.js\",\"/Users/clairepeng/Documents/Developer/azamon-server/client/src/components/Books.js\",\"/Users/clairepeng/Documents/Developer/azamon-server/client/src/components/Account.js\",\"/Users/clairepeng/Documents/Developer/azamon-server/client/src/services/privateRoute.js\",\"/Users/clairepeng/Documents/Developer/azamon-server/client/src/services/history.js\",\"/Users/clairepeng/Documents/Developer/azamon-server/client/src/App.js\",\"/Users/clairepeng/Documents/Developer/azamon-server/client/src/serviceWorker.js\",\"/Users/clairepeng/Documents/Developer/azamon-server/client/src/index.js\"],\"names\":[\"Login\",\"props\",\"_this\",\"Object\",\"classCallCheck\",\"this\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"state\",\"username\",\"password\",\"buttonLabel\",\"isLogin\",\"event\",\"self\",\"payload\",\"axios\",\"post\",\"apiBaseUrl\",\"then\",\"response\",\"status\",\"localStorage\",\"setItem\",\"data\",\"token\",\"history\",\"push\",\"alert\",\"catch\",\"error\",\"_this2\",\"react_default\",\"a\",\"createElement\",\"MuiThemeProvider_default\",\"AppBar_default\",\"title\",\"TextField_default\",\"hintText\",\"floatingLabelText\",\"onChange\",\"newValue\",\"setState\",\"type\",\"onKeyPress\",\"key\",\"handleLogin\",\"RaisedButton_default\",\"label\",\"primary\",\"onClick\",\"href\",\"Component\",\"Register\",\"handleRegister\",\"style\",\"margin\",\"Books\",\"user\",\"order\",\"stock\",\"getOrder\",\"userId\",\"getItem\",\"books\",\"err\",\"message\",\"displayOrder\",\"bookItems\",\"sort\",\"map\",\"book\",\"className\",\"_id\",\"bookDetail\",\"returnOrder\",\"length\",\"getStock\",\"get\",\"console\",\"log\",\"orderOrReturnBook\",\"bookId\",\"path\",\"session\",\"orderBook\",\"displayStock\",\"textAlign\",\"listStyleType\",\"Account\",\"logout\",\"removeItem\",\"Books_Books\",\"PrivateRoute\",\"_ref\",\"component\",\"rest\",\"objectWithoutProperties\",\"Route\",\"assign\",\"render\",\"Redirect\",\"to\",\"pathname\",\"from\",\"location\",\"createBrowserHistory\",\"App\",\"Router\",\"privateRoute_PrivateRoute\",\"exact\",\"Boolean\",\"window\",\"hostname\",\"match\",\"ReactDOM\",\"src_App_0\",\"document\",\"getElementById\",\"navigator\",\"serviceWorker\",\"ready\",\"registration\",\"unregister\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React, { Component } from \\\"react\\\";\\nimport axios from 'axios';\\nimport MuiThemeProvider from \\\"material-ui/styles/MuiThemeProvider\\\";\\nimport AppBar from \\\"material-ui/AppBar\\\";\\nimport RaisedButton from \\\"material-ui/RaisedButton\\\";\\nimport TextField from \\\"material-ui/TextField\\\";\\nclass Login extends Component {\\n  constructor(props) {\\n    super(props);\\n    this.state = {\\n      username: \\\"\\\",\\n      password: \\\"\\\",\\n      buttonLabel:'Register',\\n      isLogin:true\\n    };\\n  }\\n\\n\\n  handleLogin(event) {\\n    var apiBaseUrl = \\\"http://localhost:3000/api\\\";\\n    var self = this;\\n    var payload = {\\n      username: this.state.username,\\n      password: this.state.password\\n    };\\n    axios\\n      .post(apiBaseUrl + \\\"/login\\\", payload)\\n      .then(function(response) {\\n        if (response.status === 200) {\\n          localStorage.setItem('userId', response.data.token);\\n          self.props.history.push('/account');\\n        } else if (response.status === 401) {\\n          alert(\\\"username password do not match\\\");\\n        } else {\\n          alert(\\\"Username does not exist\\\");\\n        }\\n      })\\n      .catch(function(error) {\\n        alert(\\\"Username and password does not match\\\");\\n      });\\n  }\\n\\n  render() {\\n    return (\\n      <div>\\n        <MuiThemeProvider>\\n          <div>\\n            <AppBar title=\\\"Login\\\" />\\n            <TextField\\n              hintText=\\\"Enter your Username\\\"\\n              floatingLabelText=\\\"Username\\\"\\n              onChange={(event, newValue) =>\\n                this.setState({ username: newValue })\\n              }\\n            />\\n            <br />\\n            <TextField\\n              type=\\\"password\\\"\\n              hintText=\\\"Enter your Password\\\"\\n              floatingLabelText=\\\"Password\\\"\\n              onChange={(event, newValue) =>\\n                this.setState({ password: newValue })\\n              }\\n              onKeyPress={event => {\\n                if (event.key === 'Enter') {\\n                  this.handleLogin(event)\\n                }\\n              }}\\n            />\\n            <br />\\n            <RaisedButton\\n              label=\\\"Submit\\\"\\n              primary={true}\\n              onClick={event => this.handleLogin(event)}\\n            />\\n            <br/>\\n            <h5>Don't Have An Account? <a href=\\\"/register\\\">Click here to register.</a></h5>\\n          </div>\\n        </MuiThemeProvider>\\n      </div>\\n    );\\n  }\\n}\\n\\nexport default Login;\\n\",\"import React, { Component } from \\\"react\\\";\\nimport MuiThemeProvider from \\\"material-ui/styles/MuiThemeProvider\\\";\\nimport AppBar from \\\"material-ui/AppBar\\\";\\nimport RaisedButton from \\\"material-ui/RaisedButton\\\";\\nimport TextField from \\\"material-ui/TextField\\\";\\nimport axios from \\\"axios\\\";\\n\\nclass Register extends Component {\\n  constructor(props) {\\n    super(props);\\n    this.state = {\\n      username: \\\"\\\",\\n      password: \\\"\\\"\\n    };\\n  }\\n\\n  handleRegister(event) {\\n    if(!this.state.username || !this.state.password) {\\n      alert(\\\"Username or password cannot be empty\\\");\\n      return;\\n    }\\n    //To be done:check for empty values before hitting submit\\n    const self = this;\\n    var payload = {\\n      username: this.state.username,\\n      password: this.state.password\\n    };\\n    axios\\n      .post(\\\"user/register\\\", payload)\\n      .then(function(response) {\\n        if (response.status === 200) {\\n          alert(\\\"Registration was successful. Please login.\\\")\\n          self.props.history.push(\\\"/login\\\");\\n        }\\n      })\\n      .catch((error) => {\\n        alert(\\\"Username taken. Please choose a different one.\\\");\\n      });\\n  }\\n\\n  render() {\\n    return (\\n      <div>\\n        <MuiThemeProvider>\\n          <div>\\n            <AppBar title=\\\"Register\\\" />\\n            <TextField\\n              hintText=\\\"Enter your username\\\"\\n              floatingLabelText=\\\"User Name\\\"\\n              onChange={(event, newValue) =>\\n                this.setState({ username: newValue })\\n              }\\n            />\\n            <br />\\n            <TextField\\n              type=\\\"password\\\"\\n              hintText=\\\"Enter your Password\\\"\\n              floatingLabelText=\\\"Password\\\"\\n              onChange={(event, newValue) =>\\n                this.setState({ password: newValue })\\n              }\\n              onKeyPress={event => {\\n                if (event.key === 'Enter') {\\n                  this.handleRegister(event)\\n                }\\n              }}\\n            />\\n            <br />\\n            <RaisedButton\\n              label=\\\"Submit\\\"\\n              primary={true}\\n              style={style}\\n              onClick={event => this.handleRegister(event)}\\n            />\\n            <h4>Have an account? <a href=\\\"/login\\\">Login</a></h4>\\n          </div>\\n        </MuiThemeProvider>\\n      </div>\\n    );\\n  }\\n}\\n\\nconst style = {\\n  margin: 15\\n};\\nexport default Register;\\n\",\"import React, { Component } from \\\"react\\\";\\nimport axios from \\\"axios\\\";\\n\\nexport default class Books extends Component {\\n  state = {\\n    user: \\\"\\\",\\n    order: [],\\n    stock: []\\n  };\\n\\n  componentWillMount() {\\n    this.getStock();\\n    this.getOrder();\\n  }\\n\\n  getOrder = () => {\\n    const payload = {\\n      userId: localStorage.getItem(\\\"userId\\\")\\n    };\\n    axios\\n      .post(\\\"viewOrder\\\", payload)\\n      .then(response => {\\n        if (response.status === 200) {\\n          this.setState({\\n            order: response.data.books\\n          });\\n        }\\n      })\\n      .catch(err => {\\n        alert(err.message);\\n      });\\n  };\\n\\n\\n  // view books in order, plus return\\n  displayOrder = () => {\\n    const books = this.state.order;\\n    const bookItems = books.sort().map(book => (\\n      <li className=\\\"collection-item\\\" key={book._id}>\\n        {book.bookDetail.title}{\\\" \\\"}\\n        <button onClick={() => this.returnOrder(book._id)}>Return</button>\\n      </li>\\n    ));\\n    return (\\n      <div>\\n        {bookItems.length > 0 ? \\\"\\\" : \\\"You have not ordered any.\\\"}\\n        <ul className=\\\"collection\\\">{bookItems}</ul>\\n      </div>\\n    );\\n  };\\n\\n  getStock = () => {\\n    axios\\n      .get(\\\"book/inStock\\\")\\n      .then(response => {\\n        console.log(response);\\n        if (response.status === 200) {\\n          this.setState({\\n            stock: response.data.books\\n          });\\n        }\\n      })\\n      .catch(err => {\\n        console.log(err.message);\\n      });\\n  };\\n\\n  orderOrReturnBook = (bookId, path) => {\\n    const payload = {\\n      session: localStorage.getItem(\\\"userId\\\"),\\n      bookId\\n    };\\n    axios\\n      .post(path, payload)\\n      .then((response) => {\\n        if(response.status === 200) {\\n          this.getOrder();\\n          this.getStock();\\n        }\\n      })\\n      .catch(err => {\\n        console.log(err.message);\\n      });\\n  };\\n\\n  orderBook = bookId => {\\n    return this.orderOrReturnBook(bookId, \\\"order\\\");\\n  };\\n\\n  returnOrder = bookId => {\\n    return this.orderOrReturnBook(bookId, \\\"return\\\");\\n  };\\n\\n  // order books\\n  displayStock = () => {\\n    const books = this.state.stock;\\n    const bookItems = books.sort().map(book => (\\n      <li className=\\\"collection-item\\\" key={book.bookId}>\\n        {book.title}\\n        <button onClick={() => this.orderBook(book.bookId)}>Order</button>\\n      </li>\\n    ));\\n    return (\\n      <div>\\n        {bookItems.length > 0 ? \\\"\\\" : \\\"We have no more books in stock\\\"}\\n        <ul className=\\\"collection\\\">{bookItems}</ul>\\n      </div>\\n    );\\n  };\\n\\n  render() {\\n    return (\\n      <div style={style}>\\n        <table>\\n          <thead>\\n          <tr>\\n            <th>Your Order</th>\\n            <th>Our Stock</th>\\n          </tr>\\n          </thead>\\n          <tbody>\\n          <tr>\\n            <td>\\n              {this.displayOrder()}\\n            </td>\\n            <td>\\n              {this.displayStock()}\\n            </td>\\n          </tr>\\n          </tbody>\\n        </table>\\n      </div>\\n    );\\n  }\\n}\\n\\nconst style = {\\n  textAlign: 'center',\\n  listStyleType: 'none'\\n}\",\"import React, { Component } from 'react';\\nimport MuiThemeProvider from \\\"material-ui/styles/MuiThemeProvider\\\";\\nimport AppBar from \\\"material-ui/AppBar\\\";\\n\\nimport RaisedButton from \\\"material-ui/RaisedButton\\\";\\nimport axios from 'axios';\\n\\nimport Books from './Books';\\n\\nclass Account extends Component {\\n  logout = () => {\\n    // Clear session\\n    axios.get(\\\"logout\\\")\\n      .then(response => {\\n        console.log(response);\\n        if(response.status === 200) {\\n          localStorage.removeItem('userId');\\n          this.props.history.push('/login');\\n        }\\n      })\\n      .catch(err => {\\n        alert(err);\\n      })\\n  }\\n\\n  render() {\\n    return (\\n      <MuiThemeProvider>\\n        <div>\\n            <AppBar title=\\\"My Account\\\"/> \\n            <br/>\\n            <Books/>\\n            <br/>\\n            <RaisedButton onClick={() => this.logout()}>Log out</RaisedButton>\\n        </div>\\n      </MuiThemeProvider>\\n    )\\n  }\\n}\\n\\nexport default Account;\",\"import React from \\\"react\\\";\\nimport { Route, Redirect } from \\\"react-router-dom\\\";\\n\\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\\n  <Route\\n    {...rest}\\n    render={props =>\\n      localStorage.getItem(\\\"userId\\\") ? (\\n        <Component {...props} />\\n      ) : (\\n        <Redirect\\n          to={{ pathname: \\\"/login\\\", state: { from: props.location } }}\\n        />\\n      )\\n    }\\n  />\\n);\\n\",\"import { createBrowserHistory } from 'history';\\n\\nexport const history = createBrowserHistory();\",\"import React, { Component } from \\\"react\\\";\\nimport { Router, Route } from \\\"react-router-dom\\\";\\nimport \\\"./App.css\\\";\\nimport Login from \\\"./components/Login\\\";\\nimport Register from \\\"./components/Register\\\";\\nimport Account from \\\"./components/Account\\\";\\nimport { PrivateRoute } from \\\"./services/privateRoute\\\";\\nimport { history } from \\\"./services/history\\\";\\n\\nclass App extends Component {\\n  constructor(props) {\\n    super(props);\\n    this.state = {};\\n  }\\n\\n  render() {\\n    return (\\n      <Router history={history}>\\n        <div className=\\\"App\\\">\\n          <PrivateRoute  path=\\\"/account\\\" component={Account} />\\n          <Route exact path=\\\"/\\\" component={Login} />\\n          <Route path=\\\"/login\\\" component={Login} />\\n          <Route path=\\\"/register\\\" component={Register} />\\n        </div>\\n      </Router>\\n    );\\n  }\\n}\\n\\nexport default App;\\n\",\"// This optional code is used to register a service worker.\\n// register() is not called by default.\\n\\n// This lets the app load faster on subsequent visits in production, and gives\\n// it offline capabilities. However, it also means that developers (and users)\\n// will only see deployed updates on subsequent visits to a page, after all the\\n// existing tabs open on the page have been closed, since previously cached\\n// resources are updated in the background.\\n\\n// To learn more about the benefits of this model and instructions on how to\\n// opt-in, read http://bit.ly/CRA-PWA\\n\\nconst isLocalhost = Boolean(\\n  window.location.hostname === 'localhost' ||\\n    // [::1] is the IPv6 localhost address.\\n    window.location.hostname === '[::1]' ||\\n    // 127.0.0.1/8 is considered localhost for IPv4.\\n    window.location.hostname.match(\\n      /^127(?:\\\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\\n    )\\n);\\n\\nexport function register(config) {\\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\\n    // The URL constructor is available in all browsers that support SW.\\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\\n    if (publicUrl.origin !== window.location.origin) {\\n      // Our service worker won't work if PUBLIC_URL is on a different origin\\n      // from what our page is served on. This might happen if a CDN is used to\\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\\n      return;\\n    }\\n\\n    window.addEventListener('load', () => {\\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\\n\\n      if (isLocalhost) {\\n        // This is running on localhost. Let's check if a service worker still exists or not.\\n        checkValidServiceWorker(swUrl, config);\\n\\n        // Add some additional logging to localhost, pointing developers to the\\n        // service worker/PWA documentation.\\n        navigator.serviceWorker.ready.then(() => {\\n          console.log(\\n            'This web app is being served cache-first by a service ' +\\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\\n          );\\n        });\\n      } else {\\n        // Is not localhost. Just register service worker\\n        registerValidSW(swUrl, config);\\n      }\\n    });\\n  }\\n}\\n\\nfunction registerValidSW(swUrl, config) {\\n  navigator.serviceWorker\\n    .register(swUrl)\\n    .then(registration => {\\n      registration.onupdatefound = () => {\\n        const installingWorker = registration.installing;\\n        if (installingWorker == null) {\\n          return;\\n        }\\n        installingWorker.onstatechange = () => {\\n          if (installingWorker.state === 'installed') {\\n            if (navigator.serviceWorker.controller) {\\n              // At this point, the updated precached content has been fetched,\\n              // but the previous service worker will still serve the older\\n              // content until all client tabs are closed.\\n              console.log(\\n                'New content is available and will be used when all ' +\\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\\n              );\\n\\n              // Execute callback\\n              if (config && config.onUpdate) {\\n                config.onUpdate(registration);\\n              }\\n            } else {\\n              // At this point, everything has been precached.\\n              // It's the perfect time to display a\\n              // \\\"Content is cached for offline use.\\\" message.\\n              console.log('Content is cached for offline use.');\\n\\n              // Execute callback\\n              if (config && config.onSuccess) {\\n                config.onSuccess(registration);\\n              }\\n            }\\n          }\\n        };\\n      };\\n    })\\n    .catch(error => {\\n      console.error('Error during service worker registration:', error);\\n    });\\n}\\n\\nfunction checkValidServiceWorker(swUrl, config) {\\n  // Check if the service worker can be found. If it can't reload the page.\\n  fetch(swUrl)\\n    .then(response => {\\n      // Ensure service worker exists, and that we really are getting a JS file.\\n      const contentType = response.headers.get('content-type');\\n      if (\\n        response.status === 404 ||\\n        (contentType != null && contentType.indexOf('javascript') === -1)\\n      ) {\\n        // No service worker found. Probably a different app. Reload the page.\\n        navigator.serviceWorker.ready.then(registration => {\\n          registration.unregister().then(() => {\\n            window.location.reload();\\n          });\\n        });\\n      } else {\\n        // Service worker found. Proceed as normal.\\n        registerValidSW(swUrl, config);\\n      }\\n    })\\n    .catch(() => {\\n      console.log(\\n        'No internet connection found. App is running in offline mode.'\\n      );\\n    });\\n}\\n\\nexport function unregister() {\\n  if ('serviceWorker' in navigator) {\\n    navigator.serviceWorker.ready.then(registration => {\\n      registration.unregister();\\n    });\\n  }\\n}\\n\",\"import React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport './index.css';\\nimport App from './App';\\nimport * as serviceWorker from './serviceWorker';\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n\\n// If you want your app to work offline and load faster, you can change\\n// unregister() to register() below. Note this comes with some pitfalls.\\n// Learn more about service workers: http://bit.ly/CRA-PWA\\nserviceWorker.unregister();\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){e.exports=n(264)},109:function(e,t,n){},111:function(e,t,n){},264:function(e,t,n){\"use strict\";n.r(t);var a=n(0),r=n.n(a),o=n(28),l=n.n(o),c=(n(109),n(15)),s=n(16),u=n(19),i=n(17),m=n(20),d=n(267),h=n(265),f=(n(111),n(21)),p=n.n(f),g=n(35),E=n.n(g),b=n(36),k=n.n(b),v=n(37),y=n.n(v),O=n(38),w=n.n(O),j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={username:\"\",password:\"\",buttonLabel:\"Register\",isLogin:!0},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:\"handleLogin\",value:function(e){var t=this,n={username:this.state.username,password:this.state.password};p.a.post(\"http://localhost:3000/api/login\",n).then(function(e){200===e.status?(localStorage.setItem(\"userId\",e.data.token),t.props.history.push(\"/account\")):401===e.status?alert(\"username password do not match\"):alert(\"Username does not exist\")}).catch(function(e){alert(\"Username and password does not match\")})}},{key:\"render\",value:function(){var e=this;return r.a.createElement(\"div\",null,r.a.createElement(E.a,null,r.a.createElement(\"div\",null,r.a.createElement(k.a,{title:\"Login\"}),r.a.createElement(w.a,{hintText:\"Enter your Username\",floatingLabelText:\"Username\",onChange:function(t,n){return e.setState({username:n})}}),r.a.createElement(\"br\",null),r.a.createElement(w.a,{type:\"password\",hintText:\"Enter your Password\",floatingLabelText:\"Password\",onChange:function(t,n){return e.setState({password:n})},onKeyPress:function(t){\"Enter\"===t.key&&e.handleLogin(t)}}),r.a.createElement(\"br\",null),r.a.createElement(y.a,{label:\"Submit\",primary:!0,onClick:function(t){return e.handleLogin(t)}}),r.a.createElement(\"br\",null),r.a.createElement(\"h5\",null,\"Don't Have An Account? \",r.a.createElement(\"a\",{href:\"/register\"},\"Click here to register.\")))))}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={username:\"\",password:\"\"},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:\"handleRegister\",value:function(e){if(this.state.username&&this.state.password){var t=this,n={username:this.state.username,password:this.state.password};p.a.post(\"user/register\",n).then(function(e){200===e.status&&(alert(\"Registration was successful. Please login.\"),t.props.history.push(\"/login\"))}).catch(function(e){alert(\"Username taken. Please choose a different one.\")})}else alert(\"Username or password cannot be empty\")}},{key:\"render\",value:function(){var e=this;return r.a.createElement(\"div\",null,r.a.createElement(E.a,null,r.a.createElement(\"div\",null,r.a.createElement(k.a,{title:\"Register\"}),r.a.createElement(w.a,{hintText:\"Enter your username\",floatingLabelText:\"User Name\",onChange:function(t,n){return e.setState({username:n})}}),r.a.createElement(\"br\",null),r.a.createElement(w.a,{type:\"password\",hintText:\"Enter your Password\",floatingLabelText:\"Password\",onChange:function(t,n){return e.setState({password:n})},onKeyPress:function(t){\"Enter\"===t.key&&e.handleRegister(t)}}),r.a.createElement(\"br\",null),r.a.createElement(y.a,{label:\"Submit\",primary:!0,style:C,onClick:function(t){return e.handleRegister(t)}}),r.a.createElement(\"h4\",null,\"Have an account? \",r.a.createElement(\"a\",{href:\"/login\"},\"Login\")))))}}]),t}(a.Component),C={margin:15},I=S,x=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={user:\"\",order:[],stock:[]},n.getOrder=function(){var e={userId:localStorage.getItem(\"userId\")};p.a.post(\"viewOrder\",e).then(function(e){200===e.status&&n.setState({order:e.data.books})}).catch(function(e){alert(e.message)})},n.displayOrder=function(){var e=n.state.order.sort().map(function(e){return r.a.createElement(\"li\",{className:\"collection-item\",key:e._id},e.bookDetail.title,\" \",r.a.createElement(\"button\",{onClick:function(){return n.returnOrder(e._id)}},\"Return\"))});return r.a.createElement(\"div\",null,e.length>0?\"\":\"You have not ordered any.\",r.a.createElement(\"ul\",{className:\"collection\"},e))},n.getStock=function(){p.a.get(\"book/inStock\").then(function(e){console.log(e),200===e.status&&n.setState({stock:e.data.books})}).catch(function(e){console.log(e.message)})},n.orderOrReturnBook=function(e,t){var a={session:localStorage.getItem(\"userId\"),bookId:e};p.a.post(t,a).then(function(e){200===e.status&&(n.getOrder(),n.getStock())}).catch(function(e){console.log(e.message)})},n.orderBook=function(e){return n.orderOrReturnBook(e,\"order\")},n.returnOrder=function(e){return n.orderOrReturnBook(e,\"return\")},n.displayStock=function(){var e=n.state.stock.sort().map(function(e){return r.a.createElement(\"li\",{className:\"collection-item\",key:e.bookId},e.title,r.a.createElement(\"button\",{onClick:function(){return n.orderBook(e.bookId)}},\"Order\"))});return r.a.createElement(\"div\",null,e.length>0?\"\":\"We have no more books in stock\",r.a.createElement(\"ul\",{className:\"collection\"},e))},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:\"componentWillMount\",value:function(){this.getStock(),this.getOrder()}},{key:\"render\",value:function(){return r.a.createElement(\"div\",{style:L},r.a.createElement(\"table\",null,r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,\"Your Order\"),r.a.createElement(\"th\",null,\"Our Stock\"))),r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,this.displayOrder()),r.a.createElement(\"td\",null,this.displayStock())))))}}]),t}(a.Component),L={textAlign:\"center\",listStyleType:\"none\"},R=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){p.a.get(\"logout\").then(function(e){console.log(e),200===e.status&&(localStorage.removeItem(\"userId\"),n.props.history.push(\"/login\"))}).catch(function(e){alert(e)})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:\"render\",value:function(){var e=this;return r.a.createElement(E.a,null,r.a.createElement(\"div\",null,r.a.createElement(k.a,{title:\"My Account\"}),r.a.createElement(\"br\",null),r.a.createElement(x,null),r.a.createElement(\"br\",null),r.a.createElement(y.a,{onClick:function(){return e.logout()}},\"Log out\")))}}]),t}(a.Component),T=n(102),P=n(266),A=function(e){var t=e.component,n=Object(T.a)(e,[\"component\"]);return r.a.createElement(h.a,Object.assign({},n,{render:function(e){return localStorage.getItem(\"userId\")?r.a.createElement(t,e):r.a.createElement(P.a,{to:{pathname:\"/login\",state:{from:e.location}}})}}))},B=n(39),U=Object(B.a)(),N=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:\"render\",value:function(){return r.a.createElement(d.a,{history:U},r.a.createElement(\"div\",{className:\"App\"},r.a.createElement(A,{path:\"/account\",component:R}),r.a.createElement(h.a,{exact:!0,path:\"/\",component:j}),r.a.createElement(h.a,{path:\"/login\",component:j}),r.a.createElement(h.a,{path:\"/register\",component:I})))}}]),t}(a.Component);Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(N,null),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[104,2,1]]]);","extractedComments":[]}