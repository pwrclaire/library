(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){e.exports=n(264)},109:function(e,t,n){},111:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),l=n.n(o),c=(n(109),n(15)),s=n(16),u=n(19),i=n(17),m=n(20),d=n(267),h=n(265),f=(n(111),n(21)),p=n.n(f),g=n(35),E=n.n(g),b=n(36),k=n.n(b),v=n(37),y=n.n(v),O=n(38),w=n.n(O),j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={username:"",password:"",buttonLabel:"Register",isLogin:!0},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleLogin",value:function(e){var t=this,n={username:this.state.username,password:this.state.password};p.a.post("http://localhost:3000/api/login",n).then(function(e){200===e.status?(localStorage.setItem("userId",e.data.token),t.props.history.push("/account")):401===e.status?alert("username password do not match"):alert("Username does not exist")}).catch(function(e){alert("Username and password does not match")})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement("div",null,r.a.createElement(k.a,{title:"Login"}),r.a.createElement(w.a,{hintText:"Enter your Username",floatingLabelText:"Username",onChange:function(t,n){return e.setState({username:n})}}),r.a.createElement("br",null),r.a.createElement(w.a,{type:"password",hintText:"Enter your Password",floatingLabelText:"Password",onChange:function(t,n){return e.setState({password:n})},onKeyPress:function(t){"Enter"===t.key&&e.handleLogin(t)}}),r.a.createElement("br",null),r.a.createElement(y.a,{label:"Submit",primary:!0,onClick:function(t){return e.handleLogin(t)}}),r.a.createElement("br",null),r.a.createElement("h5",null,"Don't Have An Account? ",r.a.createElement("a",{href:"/register"},"Click here to register.")))))}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={username:"",password:""},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleRegister",value:function(e){if(this.state.username&&this.state.password){var t=this,n={username:this.state.username,password:this.state.password};p.a.post("user/register",n).then(function(e){200===e.status&&(alert("Registration was successful. Please login."),t.props.history.push("/login"))}).catch(function(e){alert("Username taken. Please choose a different one.")})}else alert("Username or password cannot be empty")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement("div",null,r.a.createElement(k.a,{title:"Register"}),r.a.createElement(w.a,{hintText:"Enter your username",floatingLabelText:"User Name",onChange:function(t,n){return e.setState({username:n})}}),r.a.createElement("br",null),r.a.createElement(w.a,{type:"password",hintText:"Enter your Password",floatingLabelText:"Password",onChange:function(t,n){return e.setState({password:n})},onKeyPress:function(t){"Enter"===t.key&&e.handleRegister(t)}}),r.a.createElement("br",null),r.a.createElement(y.a,{label:"Submit",primary:!0,style:C,onClick:function(t){return e.handleRegister(t)}}),r.a.createElement("h4",null,"Have an account? ",r.a.createElement("a",{href:"/login"},"Login")))))}}]),t}(a.Component),C={margin:15},I=S,x=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={user:"",order:[],stock:[]},n.getOrder=function(){var e={userId:localStorage.getItem("userId")};p.a.post("viewOrder",e).then(function(e){200===e.status&&n.setState({order:e.data.books})}).catch(function(e){alert(e.message)})},n.displayOrder=function(){var e=n.state.order.sort().map(function(e){return r.a.createElement("li",{className:"collection-item",key:e._id},e.bookDetail.title," ",r.a.createElement("button",{onClick:function(){return n.returnOrder(e._id)}},"Return"))});return r.a.createElement("div",null,e.length>0?"":"You have not ordered any.",r.a.createElement("ul",{className:"collection"},e))},n.getStock=function(){p.a.get("book/inStock").then(function(e){console.log(e),200===e.status&&n.setState({stock:e.data.books})}).catch(function(e){console.log(e.message)})},n.orderOrReturnBook=function(e,t){var a={session:localStorage.getItem("userId"),bookId:e};p.a.post(t,a).then(function(e){200===e.status&&(n.getOrder(),n.getStock())}).catch(function(e){console.log(e.message)})},n.orderBook=function(e){return n.orderOrReturnBook(e,"order")},n.returnOrder=function(e){return n.orderOrReturnBook(e,"return")},n.displayStock=function(){var e=n.state.stock.sort().map(function(e){return r.a.createElement("li",{className:"collection-item",key:e.bookId},e.title,r.a.createElement("button",{onClick:function(){return n.orderBook(e.bookId)}},"Order"))});return r.a.createElement("div",null,e.length>0?"":"We have no more books in stock",r.a.createElement("ul",{className:"collection"},e))},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.getStock(),this.getOrder()}},{key:"render",value:function(){return r.a.createElement("div",{style:L},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Your Order"),r.a.createElement("th",null,"Our Stock"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,this.displayOrder()),r.a.createElement("td",null,this.displayStock())))))}}]),t}(a.Component),L={textAlign:"center",listStyleType:"none"},R=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){p.a.get("logout").then(function(e){console.log(e),200===e.status&&(localStorage.removeItem("userId"),n.props.history.push("/login"))}).catch(function(e){alert(e)})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(E.a,null,r.a.createElement("div",null,r.a.createElement(k.a,{title:"My Account"}),r.a.createElement("br",null),r.a.createElement(x,null),r.a.createElement("br",null),r.a.createElement(y.a,{onClick:function(){return e.logout()}},"Log out")))}}]),t}(a.Component),T=n(102),P=n(266),A=function(e){var t=e.component,n=Object(T.a)(e,["component"]);return r.a.createElement(h.a,Object.assign({},n,{render:function(e){return localStorage.getItem("userId")?r.a.createElement(t,e):r.a.createElement(P.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},B=n(39),U=Object(B.a)(),N=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{history:U},r.a.createElement("div",{className:"App"},r.a.createElement(A,{path:"/account",component:R}),r.a.createElement(h.a,{exact:!0,path:"/",component:j}),r.a.createElement(h.a,{path:"/login",component:j}),r.a.createElement(h.a,{path:"/register",component:I})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[104,2,1]]]);
//# sourceMappingURL=main.1f56497a.chunk.js.map